<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Load Master™: raf-db/RAF Database System/src/com/pekinsoft/rafdb/db/BaseRecordsFile.java Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Northwind48.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Load Master™
   &#160;<span id="projectnumber">0.6.8 build 2583</span>
   </div>
   <div id="projectbrief">An integrated load tracking and accounting system for owner/operator truck drivers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_81b8d72ca1ee72c83b99c7be26175176.html">raf-db</a></li><li class="navelem"><a class="el" href="../../dir_fe64335b11920c777e15dcbf0fcb78f6.html">RAF Database System</a></li><li class="navelem"><a class="el" href="../../dir_1e97416392e703d5b9b7a26c5d0f7374.html">src</a></li><li class="navelem"><a class="el" href="../../dir_fb2e3de6b79521052e1a7aac38a3537a.html">com</a></li><li class="navelem"><a class="el" href="../../dir_a26901eaae604dfdbb024bce856d3f50.html">pekinsoft</a></li><li class="navelem"><a class="el" href="../../dir_36251b6f2dbf87cac6df0f0e5b541c73.html">rafdb</a></li><li class="navelem"><a class="el" href="../../dir_ff2f712b72076327751f247255a1ef59.html">db</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BaseRecordsFile.java</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/d68/BaseRecordsFile_8java.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2019 Integrity Solutions</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * GNU General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="../../dc/dfe/namespacecom_1_1pekinsoft_1_1rafdb_1_1db.html">   17</a></span>&#160;<span class="keyword">package </span>com.pekinsoft.rafdb.db;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">import</span> <a class="code" href="../../d8/dee/namespacecom.html">com</a>.<a class="code" href="../../db/d3f/namespacecom_1_1pekinsoft.html">pekinsoft</a>.<a class="code" href="../../d4/d0c/namespacecom_1_1pekinsoft_1_1rafdb.html">rafdb</a>.<a class="code" href="../../d9/dc8/namespacecom_1_1pekinsoft_1_1rafdb_1_1exceptions.html">exceptions</a>.<a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">import</span> java.io.DataOutput;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">import</span> java.io.DataOutputStream;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> java.io.File;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">import</span> java.io.IOException;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">import</span> java.io.RandomAccessFile;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">import</span> java.util.Enumeration;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html">   31</a></span>&#160;<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html">BaseRecordsFile</a> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">//&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Private Fields&quot;&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// The database file.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keyword">private</span> RandomAccessFile file;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">//&lt;/editor-fold&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">//&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Protected Fields&quot;&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// Current file pointer to the start of the record data.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">   39</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">//&lt;/editor-fold&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">//&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Protected Constants&quot;&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// Total length, in bytes, of the global database headers.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a751effbde1eb57ccedb72128015d3800">   44</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a751effbde1eb57ccedb72128015d3800">FILE_HEADERS_REGION_LENGTH</a> = 16;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// Number of bytes in the record header.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a62d468e68d48a20b19d6d5d485e1a11c">   46</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a62d468e68d48a20b19d6d5d485e1a11c">RECORD_HEADER_LENGTH</a> = 16;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// The length of a key in the index.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ac9b165fb2c8e3f2cca1896c37ac0540c">   48</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ac9b165fb2c8e3f2cca1896c37ac0540c">MAX_KEY_LENGTH</a> = 64;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// The total length of one index entry: the key length plus the record </span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">//+ header length.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ade7fe1c3bb4e0fdce32fd27166f8dd1e">   51</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ade7fe1c3bb4e0fdce32fd27166f8dd1e">INDEX_ENTRY_LENGTH</a> = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ac9b165fb2c8e3f2cca1896c37ac0540c">MAX_KEY_LENGTH</a> + </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                                                    <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a62d468e68d48a20b19d6d5d485e1a11c">RECORD_HEADER_LENGTH</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// File pointer to the num records header.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab6466e9986a4e1576346f849f63286c7">   54</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab6466e9986a4e1576346f849f63286c7">NUM_RECORDS_HEADER_LOCATION</a> = 0;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// File pointer to the data start pointer header.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab620cb523a614b3e50052d35d53ef49">   56</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab620cb523a614b3e50052d35d53ef49">DATA_START_HEADER_LOCATION</a> = 4;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">//&lt;/editor-fold&gt;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a13c42b65cf0e0225d9421893b3f5ed8e">   69</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a13c42b65cf0e0225d9421893b3f5ed8e">BaseRecordsFile</a>(</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                String dbPath, </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                <span class="keywordtype">int</span> initialSize</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                            ) <span class="keywordflow">throws</span> </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                IOException,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">// Create the file that we are going to use.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        File f = <span class="keyword">new</span> File(dbPath);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// Test whether the file already exists.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">if</span> ( f.exists() )</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>(<span class="stringliteral">&quot;Database already exists: &quot;</span> + dbPath);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        file = <span class="keyword">new</span> RandomAccessFile(f, <span class="stringliteral">&quot;rw&quot;</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// Record Data Region starts where the (i=1)th index entry would start.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a> = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">indexPositionToKeyFp</a>(initialSize);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a49aea9e3ec0278f2223e46d56a9c61f9">setFileLength</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a8dc38e08b2501a7e025c119213d1ceaf">writeNumRecordsHeader</a>(0);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2d6e5e3597793b2c624e80c3330190e0">writeDataStartPtrHeader</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aef00b4532ce70945396f6744a9c05eb4">  103</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aef00b4532ce70945396f6744a9c05eb4">BaseRecordsFile</a>(String dbPath, String accessFlags) <span class="keywordflow">throws</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                IOException, <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">// Create the file that we are going to use.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        File f = <span class="keyword">new</span> File(dbPath);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// Test whether the file already exists.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> ( !f.exists() )</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>(<span class="stringliteral">&quot;Database not found: &quot;</span> + dbPath);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        file = <span class="keyword">new</span> RandomAccessFile(f, accessFlags);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a> = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a12345911edbe59cc1d7fafef6d06618c">readDataStartHeader</a>();</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">public</span> <span class="keyword">abstract</span> Enumeration <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2208ae2ab63523976b351d5c3cf91982">enumerateKeys</a>();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">getNumRecords</a>();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keywordtype">boolean</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab75a40a6186f13e782cfad503aff267">recordExists</a>(String key);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">protected</span> <span class="keyword">abstract</span> <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab3bf493e4b209f1d61ac2473b379c469">keyToRecordHeader</a>(String key) <span class="keywordflow">throws</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">protected</span> <span class="keyword">abstract</span> <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adac1006de15770fb641d67dfbc4ae358">allocateRecord</a>(String key, <span class="keywordtype">int</span> dataLength)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                <span class="keywordflow">throws</span> IOException, <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">protected</span> <span class="keyword">abstract</span> <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a5fffbd6a27ca770681d655195791c894">getRecordAt</a>(<span class="keywordtype">long</span> targetFp) <span class="keywordflow">throws</span> </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2b97a4749d2519f903e14d8b7e4a0333">  179</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2b97a4749d2519f903e14d8b7e4a0333">getFileLength</a>() throws IOException {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">return</span> file.length();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a49aea9e3ec0278f2223e46d56a9c61f9">  190</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a49aea9e3ec0278f2223e46d56a9c61f9">setFileLength</a>(<span class="keywordtype">long</span> len) <span class="keywordflow">throws</span> IOException {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        file.setLength(len);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    </div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aa27df5a9d2f87983a86dc3a354c17c84">  200</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aa27df5a9d2f87983a86dc3a354c17c84">readNumRecordsHeader</a>() throws IOException {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab6466e9986a4e1576346f849f63286c7">NUM_RECORDS_HEADER_LOCATION</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> file.readInt();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a8dc38e08b2501a7e025c119213d1ceaf">  211</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a8dc38e08b2501a7e025c119213d1ceaf">writeNumRecordsHeader</a>(<span class="keywordtype">int</span> numRecords) <span class="keywordflow">throws</span> IOException {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab6466e9986a4e1576346f849f63286c7">NUM_RECORDS_HEADER_LOCATION</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        file.writeInt(numRecords);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a12345911edbe59cc1d7fafef6d06618c">  223</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a12345911edbe59cc1d7fafef6d06618c">readDataStartHeader</a>() throws IOException {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab620cb523a614b3e50052d35d53ef49">DATA_START_HEADER_LOCATION</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> file.readLong();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2d6e5e3597793b2c624e80c3330190e0">  235</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2d6e5e3597793b2c624e80c3330190e0">writeDataStartPtrHeader</a>(<span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>) <span class="keywordflow">throws</span> IOException {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab620cb523a614b3e50052d35d53ef49">DATA_START_HEADER_LOCATION</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        file.writeLong(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">  247</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">indexPositionToKeyFp</a>(<span class="keywordtype">int</span> pos) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a751effbde1eb57ccedb72128015d3800">FILE_HEADERS_REGION_LENGTH</a> + (<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ade7fe1c3bb4e0fdce32fd27166f8dd1e">INDEX_ENTRY_LENGTH</a> * pos);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    </div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a0fd3246c8976366a9f49674bd7fb8847">  259</a></span>&#160;    <span class="keywordtype">long</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a0fd3246c8976366a9f49674bd7fb8847">indexPositionToRecordHeaderFp</a>(<span class="keywordtype">int</span> pos) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a751effbde1eb57ccedb72128015d3800">FILE_HEADERS_REGION_LENGTH</a> + (<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ade7fe1c3bb4e0fdce32fd27166f8dd1e">INDEX_ENTRY_LENGTH</a> * pos);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    </div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#acceb1273d504bab30e58c0a88c596f07">  270</a></span>&#160;    String <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#acceb1273d504bab30e58c0a88c596f07">readKeyFromIndex</a>(<span class="keywordtype">int</span> position) <span class="keywordflow">throws</span> IOException {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">indexPositionToKeyFp</a>(position));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">return</span> file.readUTF();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aec816da41751fe784202a4f342fa9a59">  282</a></span>&#160;    <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aec816da41751fe784202a4f342fa9a59">readRecordHeaderFromIndex</a>(<span class="keywordtype">int</span> position) <span class="keywordflow">throws</span> IOException {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a0fd3246c8976366a9f49674bd7fb8847">indexPositionToRecordHeaderFp</a>(position));</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a>.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a7d4050bb3133954fdc964548e045b623">readHeader</a>(file);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    </div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a3940dba7d35375be7aa6ae62430e6096">  293</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a3940dba7d35375be7aa6ae62430e6096">writeRecordHeaderToIndex</a>(<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> header) <span class="keywordflow">throws</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                IOException {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a0fd3246c8976366a9f49674bd7fb8847">indexPositionToRecordHeaderFp</a>(header.indexPosition));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        header.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a267a0790ffa5530c1b809b31beee2019">write</a>(file);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    </div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1cbe386e2ca822cd2e772e3676b4fc41">  309</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1cbe386e2ca822cd2e772e3676b4fc41">addEntryToIndex</a>(String key, <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> newRecord,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                   <span class="keywordtype">int</span> currentNumRecords) <span class="keywordflow">throws</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                   IOException, <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="../../da/d79/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1DbByteArrayOutputStream.html">DbByteArrayOutputStream</a> temp = <span class="keyword">new</span> <a class="code" href="../../da/d79/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1DbByteArrayOutputStream.html">DbByteArrayOutputStream</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ac9b165fb2c8e3f2cca1896c37ac0540c">MAX_KEY_LENGTH</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        (<span class="keyword">new</span> DataOutputStream(temp)).writeUTF(key);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> ( temp.size() &gt; <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ac9b165fb2c8e3f2cca1896c37ac0540c">MAX_KEY_LENGTH</a> )</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>(<span class="stringliteral">&quot;Key is larger than permitted &quot;</span> + </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                        <span class="stringliteral">&quot;size of &quot;</span> + <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ac9b165fb2c8e3f2cca1896c37ac0540c">MAX_KEY_LENGTH</a> + <span class="stringliteral">&quot; bytes&quot;</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">indexPositionToKeyFp</a>(currentNumRecords));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        temp.<a class="code" href="../../da/d79/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1DbByteArrayOutputStream.html#a4734fd9c936a3c6ad8422e88795dc3e3">writeTo</a>(file);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a0fd3246c8976366a9f49674bd7fb8847">indexPositionToRecordHeaderFp</a>(currentNumRecords));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        newRecord.write(file);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        newRecord.setIndexPosition(currentNumRecords);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a8dc38e08b2501a7e025c119213d1ceaf">writeNumRecordsHeader</a>(currentNumRecords + 1);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    </div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7cbd73864dee646462d2f86996c20d11">  337</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7cbd73864dee646462d2f86996c20d11">deleteEntryFromIndex</a>(String key, <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> header,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                        <span class="keywordtype">int</span> currentNumRecords) <span class="keywordflow">throws</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                        IOException, <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">if</span> ( header.indexPosition != currentNumRecords - 1 ) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            String lastKey = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#acceb1273d504bab30e58c0a88c596f07">readKeyFromIndex</a>(currentNumRecords - 1);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> last = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab3bf493e4b209f1d61ac2473b379c469">keyToRecordHeader</a>(lastKey);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            last.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#ad48c9c257dac86c68e372caee835262c">setIndexPosition</a>(header.indexPosition);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">indexPositionToKeyFp</a>(last.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a18171bc46d9832d10f24c7ca15e53eba">indexPosition</a>));</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            file.writeUTF(lastKey);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            file.seek(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a0fd3246c8976366a9f49674bd7fb8847">indexPositionToRecordHeaderFp</a>(last.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a18171bc46d9832d10f24c7ca15e53eba">indexPosition</a>));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            last.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a267a0790ffa5530c1b809b31beee2019">write</a>(file);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a8dc38e08b2501a7e025c119213d1ceaf">writeNumRecordsHeader</a>(currentNumRecords - 1);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    </div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aad7bb652bd7cc44627fc69641842a3ea">  360</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aad7bb652bd7cc44627fc69641842a3ea">insertRecord</a>(<a class="code" href="../../d9/dc8/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordWriter.html">RecordWriter</a> rw) <span class="keywordflow">throws</span> IOException,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                                          <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        String key = rw.getKey();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab75a40a6186f13e782cfad503aff267">recordExists</a>(key) ) </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>(<span class="stringliteral">&quot;Key exists: &quot;</span> + key);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1894e5675a82f4596becbd1f20daf4ef">insureIndexSpace</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">getNumRecords</a>() + 1);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> newRecord = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adac1006de15770fb641d67dfbc4ae358">allocateRecord</a>(key, rw.getDataLength());</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">writeRecordData</a>(newRecord, rw);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1cbe386e2ca822cd2e772e3676b4fc41">addEntryToIndex</a>(key, newRecord, <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">getNumRecords</a>());</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    </div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a987056cc95a8ceb57bcf70669c4fa5c8">  375</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a987056cc95a8ceb57bcf70669c4fa5c8">quickInsert</a>(<a class="code" href="../../d9/dc8/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordWriter.html">RecordWriter</a> rw) <span class="keywordflow">throws</span> IOException,</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                                         <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        String key = rw.getKey();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1894e5675a82f4596becbd1f20daf4ef">insureIndexSpace</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">getNumRecords</a>() + 1);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> rh = <span class="keyword">new</span> <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>, rw.getDataLength());</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">writeRecordData</a>(rh, rw);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1cbe386e2ca822cd2e772e3676b4fc41">addEntryToIndex</a>(key, rh, <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">getNumRecords</a>());</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    </div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1aa6a7b0bc9102670003083500d131ba">  395</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1aa6a7b0bc9102670003083500d131ba">updateRecord</a>(<a class="code" href="../../d9/dc8/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordWriter.html">RecordWriter</a> rw) <span class="keywordflow">throws</span> IOException,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                                          <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> header = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab3bf493e4b209f1d61ac2473b379c469">keyToRecordHeader</a>(rw.getKey());</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">if</span> ( rw.getDataLength() &gt; header.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a> ) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a4973b2852a17a8a9258110801f20a4d4">deleteRecord</a>(rw.getKey());</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aad7bb652bd7cc44627fc69641842a3ea">insertRecord</a>(rw);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">writeRecordData</a>(header, rw);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a3940dba7d35375be7aa6ae62430e6096">writeRecordHeaderToIndex</a>(header);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    </div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7d552f4de0e579e897f3ba9d1ea7a7e7">  418</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">synchronized</span> <a class="code" href="../../d5/d13/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordReader.html">RecordReader</a> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7d552f4de0e579e897f3ba9d1ea7a7e7">readRecord</a>(String key) <span class="keywordflow">throws</span> IOException,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                                          <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordtype">byte</span>[] data = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a50272ef7b769010c25c452aa92caa35a">readRecordData</a>(key);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d5/d13/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordReader.html">RecordReader</a>(key, data);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    </div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a50272ef7b769010c25c452aa92caa35a">  434</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">byte</span>[] <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a50272ef7b769010c25c452aa92caa35a">readRecordData</a>(String key) <span class="keywordflow">throws</span> IOException,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                                       <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a50272ef7b769010c25c452aa92caa35a">readRecordData</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab3bf493e4b209f1d61ac2473b379c469">keyToRecordHeader</a>(key));</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    </div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab7412b3d054453c8062650e6830818b8">  448</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">byte</span>[] <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab7412b3d054453c8062650e6830818b8">readRecordData</a>(<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> header) <span class="keywordflow">throws</span> IOException {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordtype">byte</span>[] buf = <span class="keyword">new</span> <span class="keywordtype">byte</span>[header.dataCount];</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        file.seek(header.dataPointer);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        file.readFully(buf);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">return</span> buf;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    </div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">  466</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">writeRecordData</a>(<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> header, <a class="code" href="../../d9/dc8/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordWriter.html">RecordWriter</a> rw) <span class="keywordflow">throws</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                            IOException, <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span> ( rw.getDataLength() &gt; header.dataCapacity )</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>(<span class="stringliteral">&quot;Record data does not fit.&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        header.dataCount = rw.getDataLength();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        file.seek(header.dataPointer);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        rw.writeTo((DataOutput)file);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    </div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a30930aebabcfa8e8e86d708ce7c205c9">  487</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a30930aebabcfa8e8e86d708ce7c205c9">writeRecordData</a>(<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> header, <span class="keywordtype">byte</span>[] data) <span class="keywordflow">throws</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                            IOException, <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> ( data.length &gt; header.dataCapacity )</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a>(<span class="stringliteral">&quot;Record data does not fit.&quot;</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        header.dataCount = data.length;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        file.seek(header.dataPointer);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        file.write(data, 0, data.length);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    </div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a4973b2852a17a8a9258110801f20a4d4">  505</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a4973b2852a17a8a9258110801f20a4d4">deleteRecord</a>(String key) <span class="keywordflow">throws</span> IOException,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                                          <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> delRec = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab3bf493e4b209f1d61ac2473b379c469">keyToRecordHeader</a>(key);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordtype">int</span> currentNumRecords = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">getNumRecords</a>();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2b97a4749d2519f903e14d8b7e4a0333">getFileLength</a>() == delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a> + delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a> )</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="comment">// Shrink the file since this is the last record in it.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a49aea9e3ec0278f2223e46d56a9c61f9">setFileLength</a>(delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> previous = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a5fffbd6a27ca770681d655195791c894">getRecordAt</a>(delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a> - 1);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">if</span> ( previous != <span class="keyword">null</span> ) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="comment">// Append space of deleted record onto previous record.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                previous.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a> += delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a3940dba7d35375be7aa6ae62430e6096">writeRecordHeaderToIndex</a>(previous);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                <span class="comment">// Target record is first in the file and is deleted by adding</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <span class="comment">//+ its space to the second record.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> secondRecord = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a5fffbd6a27ca770681d655195791c894">getRecordAt</a>(delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a> + </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                                    (<span class="keywordtype">long</span>) delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="keywordtype">byte</span>[] data = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a50272ef7b769010c25c452aa92caa35a">readRecordData</a>(secondRecord);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                secondRecord.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a> = delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                secondRecord.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a> += delRec.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">writeRecordData</a>(secondRecord, data);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a3940dba7d35375be7aa6ae62430e6096">writeRecordHeaderToIndex</a>(secondRecord);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7cbd73864dee646462d2f86996c20d11">deleteEntryFromIndex</a>(key, delRec, currentNumRecords);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    </div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1894e5675a82f4596becbd1f20daf4ef">  548</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1894e5675a82f4596becbd1f20daf4ef">insureIndexSpace</a>(<span class="keywordtype">int</span> requiredNumRecords) <span class="keywordflow">throws</span> IOException,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                                        <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordtype">int</span> currentNumRecords = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">getNumRecords</a>();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordtype">long</span> endIndexPtr = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">indexPositionToKeyFp</a>(requiredNumRecords);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span> ( endIndexPtr &gt; <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2b97a4749d2519f903e14d8b7e4a0333">getFileLength</a>() &amp;&amp; currentNumRecords == 0 ) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a49aea9e3ec0278f2223e46d56a9c61f9">setFileLength</a>(endIndexPtr);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a> = endIndexPtr;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2d6e5e3597793b2c624e80c3330190e0">writeDataStartPtrHeader</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">while</span> ( endIndexPtr &gt; <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a> ) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">RecordHeader</a> first = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a5fffbd6a27ca770681d655195791c894">getRecordAt</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordtype">byte</span>[] data = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a50272ef7b769010c25c452aa92caa35a">readRecordData</a>(first);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            first.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a> = <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2b97a4749d2519f903e14d8b7e4a0333">getFileLength</a>();</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            first.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a> = data.length;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a49aea9e3ec0278f2223e46d56a9c61f9">setFileLength</a>(first.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">dataPointer</a> + data.length);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">writeRecordData</a>(first, data);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a3940dba7d35375be7aa6ae62430e6096">writeRecordHeaderToIndex</a>(first);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a> += first.<a class="code" href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">dataCapacity</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2d6e5e3597793b2c624e80c3330190e0">writeDataStartPtrHeader</a>(<a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">dataStartPtr</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    </div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#af63968f0f8f0611e2fc3a9f3e2d003ca">  585</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#af63968f0f8f0611e2fc3a9f3e2d003ca">close</a>() throws IOException, <a class="code" href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">RecordsFileException</a> {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            file.close();</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        } <span class="keywordflow">finally</span> {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            file = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a077baa0453927675811ddfa32ab067cc"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a077baa0453927675811ddfa32ab067cc">com.pekinsoft.rafdb.db.BaseRecordsFile.dataStartPtr</a></div><div class="ttdeci">long dataStartPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00039">BaseRecordsFile.java:39</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a2208ae2ab63523976b351d5c3cf91982"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2208ae2ab63523976b351d5c3cf91982">com.pekinsoft.rafdb.db.BaseRecordsFile.enumerateKeys</a></div><div class="ttdeci">abstract Enumeration enumerateKeys()</div><div class="ttdoc">Returns an Enumeration of the keys of all records in the database.</div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a4973b2852a17a8a9258110801f20a4d4"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a4973b2852a17a8a9258110801f20a4d4">com.pekinsoft.rafdb.db.BaseRecordsFile.deleteRecord</a></div><div class="ttdeci">synchronized void deleteRecord(String key)</div><div class="ttdoc">Deletes a record from the database.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00505">BaseRecordsFile.java:505</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a50272ef7b769010c25c452aa92caa35a"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a50272ef7b769010c25c452aa92caa35a">com.pekinsoft.rafdb.db.BaseRecordsFile.readRecordData</a></div><div class="ttdeci">byte[] readRecordData(String key)</div><div class="ttdoc">Reads the data for the requested record from the database.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00434">BaseRecordsFile.java:434</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a1aa6a7b0bc9102670003083500d131ba"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1aa6a7b0bc9102670003083500d131ba">com.pekinsoft.rafdb.db.BaseRecordsFile.updateRecord</a></div><div class="ttdeci">synchronized void updateRecord(RecordWriter rw)</div><div class="ttdoc">Updates an existing record.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00395">BaseRecordsFile.java:395</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_aef00b4532ce70945396f6744a9c05eb4"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aef00b4532ce70945396f6744a9c05eb4">com.pekinsoft.rafdb.db.BaseRecordsFile.BaseRecordsFile</a></div><div class="ttdeci">BaseRecordsFile(String dbPath, String accessFlags)</div><div class="ttdoc">Opens an existing database file and initializes the dataStartPtr.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00103">BaseRecordsFile.java:103</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a13c42b65cf0e0225d9421893b3f5ed8e"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a13c42b65cf0e0225d9421893b3f5ed8e">com.pekinsoft.rafdb.db.BaseRecordsFile.BaseRecordsFile</a></div><div class="ttdeci">BaseRecordsFile(String dbPath, int initialSize)</div><div class="ttdoc">Creates a new database file, initializing the appropriate headers.Enough space is allocated in the in...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00069">BaseRecordsFile.java:69</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a7d552f4de0e579e897f3ba9d1ea7a7e7"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7d552f4de0e579e897f3ba9d1ea7a7e7">com.pekinsoft.rafdb.db.BaseRecordsFile.readRecord</a></div><div class="ttdeci">synchronized RecordReader readRecord(String key)</div><div class="ttdoc">Reads the requested record from the database.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00418">BaseRecordsFile.java:418</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a8dc38e08b2501a7e025c119213d1ceaf"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a8dc38e08b2501a7e025c119213d1ceaf">com.pekinsoft.rafdb.db.BaseRecordsFile.writeNumRecordsHeader</a></div><div class="ttdeci">void writeNumRecordsHeader(int numRecords)</div><div class="ttdoc">Stores the number of records to the database file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00211">BaseRecordsFile.java:211</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1DbByteArrayOutputStream_html"><div class="ttname"><a href="../../da/d79/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1DbByteArrayOutputStream.html">com.pekinsoft.rafdb.db.DbByteArrayOutputStream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd5/DbByteArrayOutputStream_8java_source.html#l00027">DbByteArrayOutputStream.java:27</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader_html_ad48c9c257dac86c68e372caee835262c"><div class="ttname"><a href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#ad48c9c257dac86c68e372caee835262c">com.pekinsoft.rafdb.db.RecordHeader.setIndexPosition</a></div><div class="ttdeci">void setIndexPosition(int indexPosition)</div><div class="ttdoc">Sets the index position of this.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/RecordHeader_8java_source.html#l00082">RecordHeader.java:82</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a2d6e5e3597793b2c624e80c3330190e0"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2d6e5e3597793b2c624e80c3330190e0">com.pekinsoft.rafdb.db.BaseRecordsFile.writeDataStartPtrHeader</a></div><div class="ttdeci">void writeDataStartPtrHeader(long dataStartPtr)</div><div class="ttdoc">Writes the data start pointer header to the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00235">BaseRecordsFile.java:235</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_acceb1273d504bab30e58c0a88c596f07"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#acceb1273d504bab30e58c0a88c596f07">com.pekinsoft.rafdb.db.BaseRecordsFile.readKeyFromIndex</a></div><div class="ttdeci">String readKeyFromIndex(int position)</div><div class="ttdoc">Reads the ith key from the index.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00270">BaseRecordsFile.java:270</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a30930aebabcfa8e8e86d708ce7c205c9"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a30930aebabcfa8e8e86d708ce7c205c9">com.pekinsoft.rafdb.db.BaseRecordsFile.writeRecordData</a></div><div class="ttdeci">void writeRecordData(RecordHeader header, byte[] data)</div><div class="ttdoc">Updates the contents of the given record.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00487">BaseRecordsFile.java:487</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader_html_a7d4050bb3133954fdc964548e045b623"><div class="ttname"><a href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a7d4050bb3133954fdc964548e045b623">com.pekinsoft.rafdb.db.RecordHeader.readHeader</a></div><div class="ttdeci">static RecordHeader readHeader(DataInput in)</div><div class="ttdoc">Creates a new.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/RecordHeader_8java_source.html#l00154">RecordHeader.java:154</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a7cbd73864dee646462d2f86996c20d11"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7cbd73864dee646462d2f86996c20d11">com.pekinsoft.rafdb.db.BaseRecordsFile.deleteEntryFromIndex</a></div><div class="ttdeci">void deleteEntryFromIndex(String key, RecordHeader header, int currentNumRecords)</div><div class="ttdoc">Removes the record from the index.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00337">BaseRecordsFile.java:337</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader_html_a18171bc46d9832d10f24c7ca15e53eba"><div class="ttname"><a href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a18171bc46d9832d10f24c7ca15e53eba">com.pekinsoft.rafdb.db.RecordHeader.indexPosition</a></div><div class="ttdeci">int indexPosition</div><div class="ttdoc">Indicates this header's position in the file index.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/RecordHeader_8java_source.html#l00044">RecordHeader.java:44</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a3940dba7d35375be7aa6ae62430e6096"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a3940dba7d35375be7aa6ae62430e6096">com.pekinsoft.rafdb.db.BaseRecordsFile.writeRecordHeaderToIndex</a></div><div class="ttdeci">void writeRecordHeaderToIndex(RecordHeader header)</div><div class="ttdoc">Writes the ith record header to the index.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00293">BaseRecordsFile.java:293</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a62d468e68d48a20b19d6d5d485e1a11c"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a62d468e68d48a20b19d6d5d485e1a11c">com.pekinsoft.rafdb.db.BaseRecordsFile.RECORD_HEADER_LENGTH</a></div><div class="ttdeci">static final int RECORD_HEADER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00046">BaseRecordsFile.java:46</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a0fd3246c8976366a9f49674bd7fb8847"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a0fd3246c8976366a9f49674bd7fb8847">com.pekinsoft.rafdb.db.BaseRecordsFile.indexPositionToRecordHeaderFp</a></div><div class="ttdeci">long indexPositionToRecordHeaderFp(int pos)</div><div class="ttdoc">Returns a file pointer in the index pointing to the first byte in the record pointer located at the g...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00259">BaseRecordsFile.java:259</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_af63968f0f8f0611e2fc3a9f3e2d003ca"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#af63968f0f8f0611e2fc3a9f3e2d003ca">com.pekinsoft.rafdb.db.BaseRecordsFile.close</a></div><div class="ttdeci">synchronized void close()</div><div class="ttdoc">Closes the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00585">BaseRecordsFile.java:585</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1DbByteArrayOutputStream_html_a4734fd9c936a3c6ad8422e88795dc3e3"><div class="ttname"><a href="../../da/d79/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1DbByteArrayOutputStream.html#a4734fd9c936a3c6ad8422e88795dc3e3">com.pekinsoft.rafdb.db.DbByteArrayOutputStream.writeTo</a></div><div class="ttdeci">synchronized void writeTo(DataOutput dstr)</div><div class="ttdoc">@inheritDoc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd5/DbByteArrayOutputStream_8java_source.html#l00048">DbByteArrayOutputStream.java:48</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_aab75a40a6186f13e782cfad503aff267"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab75a40a6186f13e782cfad503aff267">com.pekinsoft.rafdb.db.BaseRecordsFile.recordExists</a></div><div class="ttdeci">abstract boolean recordExists(String key)</div><div class="ttdoc">Check there is a record with the given key.</div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a1894e5675a82f4596becbd1f20daf4ef"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1894e5675a82f4596becbd1f20daf4ef">com.pekinsoft.rafdb.db.BaseRecordsFile.insureIndexSpace</a></div><div class="ttdeci">void insureIndexSpace(int requiredNumRecords)</div><div class="ttdoc">Checks to see if there is space for an additional index entry.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00548">BaseRecordsFile.java:548</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_ab6466e9986a4e1576346f849f63286c7"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab6466e9986a4e1576346f849f63286c7">com.pekinsoft.rafdb.db.BaseRecordsFile.NUM_RECORDS_HEADER_LOCATION</a></div><div class="ttdeci">static final long NUM_RECORDS_HEADER_LOCATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00054">BaseRecordsFile.java:54</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a12345911edbe59cc1d7fafef6d06618c"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a12345911edbe59cc1d7fafef6d06618c">com.pekinsoft.rafdb.db.BaseRecordsFile.readDataStartHeader</a></div><div class="ttdeci">long readDataStartHeader()</div><div class="ttdoc">Reads the data start pointer header from the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00223">BaseRecordsFile.java:223</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader_html_a15499ec968bee6518cab28d8772b60fb"><div class="ttname"><a href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a15499ec968bee6518cab28d8772b60fb">com.pekinsoft.rafdb.db.RecordHeader.dataCapacity</a></div><div class="ttdeci">int dataCapacity</div><div class="ttdoc">Number of bytes of data that this record can hold (4 bytes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/RecordHeader_8java_source.html#l00040">RecordHeader.java:40</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_adb9a408a501129c1b5beba25c7de5dc3"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adb9a408a501129c1b5beba25c7de5dc3">com.pekinsoft.rafdb.db.BaseRecordsFile.getNumRecords</a></div><div class="ttdeci">abstract int getNumRecords()</div><div class="ttdoc">Returns the number of records in the database.</div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a751effbde1eb57ccedb72128015d3800"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a751effbde1eb57ccedb72128015d3800">com.pekinsoft.rafdb.db.BaseRecordsFile.FILE_HEADERS_REGION_LENGTH</a></div><div class="ttdeci">static final int FILE_HEADERS_REGION_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00044">BaseRecordsFile.java:44</a></div></div>
<div class="ttc" id="anamespacecom_1_1pekinsoft_html"><div class="ttname"><a href="../../db/d3f/namespacecom_1_1pekinsoft.html">com.pekinsoft</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a49aea9e3ec0278f2223e46d56a9c61f9"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a49aea9e3ec0278f2223e46d56a9c61f9">com.pekinsoft.rafdb.db.BaseRecordsFile.setFileLength</a></div><div class="ttdeci">void setFileLength(long len)</div><div class="ttdoc">Sets the file to the length provided.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00190">BaseRecordsFile.java:190</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a5fffbd6a27ca770681d655195791c894"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a5fffbd6a27ca770681d655195791c894">com.pekinsoft.rafdb.db.BaseRecordsFile.getRecordAt</a></div><div class="ttdeci">abstract RecordHeader getRecordAt(long targetFp)</div><div class="ttdoc">Returns the record to which the target file pointer belongs — meaning the specified location in the f...</div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a2b97a4749d2519f903e14d8b7e4a0333"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a2b97a4749d2519f903e14d8b7e4a0333">com.pekinsoft.rafdb.db.BaseRecordsFile.getFileLength</a></div><div class="ttdeci">long getFileLength()</div><div class="ttdoc">Gets the length of the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00179">BaseRecordsFile.java:179</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_aab620cb523a614b3e50052d35d53ef49"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aab620cb523a614b3e50052d35d53ef49">com.pekinsoft.rafdb.db.BaseRecordsFile.DATA_START_HEADER_LOCATION</a></div><div class="ttdeci">static final long DATA_START_HEADER_LOCATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00056">BaseRecordsFile.java:56</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a1cbe386e2ca822cd2e772e3676b4fc41"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a1cbe386e2ca822cd2e772e3676b4fc41">com.pekinsoft.rafdb.db.BaseRecordsFile.addEntryToIndex</a></div><div class="ttdeci">void addEntryToIndex(String key, RecordHeader newRecord, int currentNumRecords)</div><div class="ttdoc">Appends an entry to the end of the index.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00309">BaseRecordsFile.java:309</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_aa27df5a9d2f87983a86dc3a354c17c84"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aa27df5a9d2f87983a86dc3a354c17c84">com.pekinsoft.rafdb.db.BaseRecordsFile.readNumRecordsHeader</a></div><div class="ttdeci">int readNumRecordsHeader()</div><div class="ttdoc">Retrieves the number of records in the database file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00200">BaseRecordsFile.java:200</a></div></div>
<div class="ttc" id="anamespacecom_1_1pekinsoft_1_1rafdb_html"><div class="ttname"><a href="../../d4/d0c/namespacecom_1_1pekinsoft_1_1rafdb.html">com.pekinsoft.rafdb</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a987056cc95a8ceb57bcf70669c4fa5c8"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a987056cc95a8ceb57bcf70669c4fa5c8">com.pekinsoft.rafdb.db.BaseRecordsFile.quickInsert</a></div><div class="ttdeci">synchronized void quickInsert(RecordWriter rw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00375">BaseRecordsFile.java:375</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader_html_a267a0790ffa5530c1b809b31beee2019"><div class="ttname"><a href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a267a0790ffa5530c1b809b31beee2019">com.pekinsoft.rafdb.db.RecordHeader.write</a></div><div class="ttdeci">void write(DataOutput out)</div><div class="ttdoc">Writes the parameters of this.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/RecordHeader_8java_source.html#l00139">RecordHeader.java:139</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_adac1006de15770fb641d67dfbc4ae358"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#adac1006de15770fb641d67dfbc4ae358">com.pekinsoft.rafdb.db.BaseRecordsFile.allocateRecord</a></div><div class="ttdeci">abstract RecordHeader allocateRecord(String key, int dataLength)</div><div class="ttdoc">Locates space for a new record of.</div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_ade7fe1c3bb4e0fdce32fd27166f8dd1e"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ade7fe1c3bb4e0fdce32fd27166f8dd1e">com.pekinsoft.rafdb.db.BaseRecordsFile.INDEX_ENTRY_LENGTH</a></div><div class="ttdeci">static final int INDEX_ENTRY_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00051">BaseRecordsFile.java:51</a></div></div>
<div class="ttc" id="anamespacecom_html"><div class="ttname"><a href="../../d8/dee/namespacecom.html">com</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html">com.pekinsoft.rafdb.db.BaseRecordsFile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00031">BaseRecordsFile.java:31</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader_html"><div class="ttname"><a href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html">com.pekinsoft.rafdb.db.RecordHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/RecordHeader_8java_source.html#l00028">RecordHeader.java:28</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a7a8b0444e162b50827d654cf8ac33163"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a7a8b0444e162b50827d654cf8ac33163">com.pekinsoft.rafdb.db.BaseRecordsFile.writeRecordData</a></div><div class="ttdeci">void writeRecordData(RecordHeader header, RecordWriter rw)</div><div class="ttdoc">Updates the contents of the given record.A.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00466">BaseRecordsFile.java:466</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_aad7bb652bd7cc44627fc69641842a3ea"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aad7bb652bd7cc44627fc69641842a3ea">com.pekinsoft.rafdb.db.BaseRecordsFile.insertRecord</a></div><div class="ttdeci">synchronized void insertRecord(RecordWriter rw)</div><div class="ttdoc">Adds a new record to the database.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00360">BaseRecordsFile.java:360</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_ab7412b3d054453c8062650e6830818b8"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab7412b3d054453c8062650e6830818b8">com.pekinsoft.rafdb.db.BaseRecordsFile.readRecordData</a></div><div class="ttdeci">byte[] readRecordData(RecordHeader header)</div><div class="ttdoc">Reads the data for the requested record from the database.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00448">BaseRecordsFile.java:448</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader_html_a21ec3c8861b6373b2c756176b01b39f2"><div class="ttname"><a href="../../d7/d3f/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordHeader.html#a21ec3c8861b6373b2c756176b01b39f2">com.pekinsoft.rafdb.db.RecordHeader.dataPointer</a></div><div class="ttdeci">long dataPointer</div><div class="ttdoc">File pointer to the first byte of record data (8 bytes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/RecordHeader_8java_source.html#l00032">RecordHeader.java:32</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_ab3bf493e4b209f1d61ac2473b379c469"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ab3bf493e4b209f1d61ac2473b379c469">com.pekinsoft.rafdb.db.BaseRecordsFile.keyToRecordHeader</a></div><div class="ttdeci">abstract RecordHeader keyToRecordHeader(String key)</div><div class="ttdoc">Maps a key to a record header.</div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException_html"><div class="ttname"><a href="../../de/d05/classcom_1_1pekinsoft_1_1rafdb_1_1exceptions_1_1RecordsFileException.html">com.pekinsoft.rafdb.exceptions.RecordsFileException</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd2/RecordsFileException_8java_source.html#l00023">RecordsFileException.java:23</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordReader_html"><div class="ttname"><a href="../../d5/d13/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordReader.html">com.pekinsoft.rafdb.db.RecordReader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df5/RecordReader_8java_source.html#l00029">RecordReader.java:29</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_a500ddf5294b29a9006093e128c2f100b"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#a500ddf5294b29a9006093e128c2f100b">com.pekinsoft.rafdb.db.BaseRecordsFile.indexPositionToKeyFp</a></div><div class="ttdeci">long indexPositionToKeyFp(int pos)</div><div class="ttdoc">Returns a file pointer in the index pointing to the first byte in the key located at the given index ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00247">BaseRecordsFile.java:247</a></div></div>
<div class="ttc" id="anamespacecom_1_1pekinsoft_1_1rafdb_1_1exceptions_html"><div class="ttname"><a href="../../d9/dc8/namespacecom_1_1pekinsoft_1_1rafdb_1_1exceptions.html">com.pekinsoft.rafdb.exceptions</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd2/RecordsFileException_8java_source.html#l00017">RecordsFileException.java:17</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_aec816da41751fe784202a4f342fa9a59"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#aec816da41751fe784202a4f342fa9a59">com.pekinsoft.rafdb.db.BaseRecordsFile.readRecordHeaderFromIndex</a></div><div class="ttdeci">RecordHeader readRecordHeaderFromIndex(int position)</div><div class="ttdoc">Reads the ith record header from the index.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00282">BaseRecordsFile.java:282</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile_html_ac9b165fb2c8e3f2cca1896c37ac0540c"><div class="ttname"><a href="../../d8/ddb/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1BaseRecordsFile.html#ac9b165fb2c8e3f2cca1896c37ac0540c">com.pekinsoft.rafdb.db.BaseRecordsFile.MAX_KEY_LENGTH</a></div><div class="ttdeci">static final int MAX_KEY_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d68/BaseRecordsFile_8java_source.html#l00048">BaseRecordsFile.java:48</a></div></div>
<div class="ttc" id="aclasscom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordWriter_html"><div class="ttname"><a href="../../d9/dc8/classcom_1_1pekinsoft_1_1rafdb_1_1db_1_1RecordWriter.html">com.pekinsoft.rafdb.db.RecordWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d15/RecordWriter_8java_source.html#l00028">RecordWriter.java:28</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
